services:
  sonarr:
    container_name: sonarr
    image: "lscr.io/linuxserver/sonarr:latest"
    networks:
      - configarr
    restart: unless-stopped
    environment:
      - "PUID=${PUID:-1000}"
      - "PGID=${PGID:-1000}"
      - "TZ=${TZ:-Europe/UTC}"
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "${ROOT}/config/sonarr:/config"
      - "./services/sonarr.xml:/config/config.xml:rw"
      - "${HDDSTORAGE}:/Media"
    ports:
      - 9602:8989
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8989/ping"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  radarr:
    container_name: radarr
    image: "lscr.io/linuxserver/radarr:latest"
    restart: unless-stopped
    networks:
      - configarr
    environment:
      - "PUID=${PUID:-1000}"
      - "PGID=${PGID:-1000}"
      - "TZ=${TZ:-Europe/UTC}"
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "${ROOT}/config/radarr:/config"
      - "./services/radarr.xml:/config/config.xml:rw"
      - "${HDDSTORAGE}:/Media"
    ports:
      - 9603:7878
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:7878/ping"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  bazarr:
    container_name: bazarr
    image: "lscr.io/linuxserver/bazarr:latest"
    restart: unless-stopped
    networks:
      - configarr
    environment:
      - "PUID=${PUID:-1000}"
      - "PGID=${PGID:-1000}"
      - "TZ=${TZ:-Europe/UTC}"
      - UMASK_SET=022
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "${ROOT}/config/bazarr:/config"
      - "./services/bazarr.yaml:/config/config.yaml:rw"
      - "${HDDSTORAGE}:/Media"
    ports:
      - "9604:6767"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:6767/api/system/ping"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  jellyseerr:
    image: "fallenbagel/jellyseerr:latest"
    container_name: jellyseerr
    environment:
      - LOG_LEVEL=debug
      - "TZ=${TZ:-Europe/UTC}"
    ports:
      - "9605:5055"
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "${ROOT}/config/jellyseerr:/app/config"
      - "./services/jellyseerr.json:/app/config/settings.json:rw"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:5055/api/v1/status"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  sabnzbd:
    image: lscr.io/linuxserver/sabnzbd:latest
    container_name: sabnzbd
    environment:
      - "PUID=${PUID:-1000}"
      - "PGID=${PGID:-1000}"
      - "TZ=${TZ:-Europe/UTC}"
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - "${ROOT}/config/sabnzb:/config"
      - "./services/sabnzbd.ini:/config/sabnzbd.ini:rw"
      - "${HDDSTORAGE}:/Media"
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    ports:
      - 9606:8080
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/api?mode=version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  nzbhydra2:
    image: lscr.io/linuxserver/nzbhydra2:latest
    container_name: nzbhydra2
    environment:
      - "PUID=${PUID:-1000}"
      - "PGID=${PGID:-1000}"
      - "TZ=${TZ:-Europe/UTC}"
    ports:
      - 9607:5076/tcp
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - "${ROOT}/config/nzbhydra2:/config"
      - "./services/nzbhydra.yaml:/config/nzbhydra.yaml:rw"
      - "${HDDSTORAGE}:/Media"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5076/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  configarr:
    name: configarr
